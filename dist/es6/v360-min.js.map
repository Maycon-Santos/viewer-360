{"version":3,"sources":["Object/merge.js","v360.js","appendCanvas.js","easingFunctions.js","preload.js","resizeCanvas.js","resizeImage.js","setImage.js","V360DOM.js","events/load.js","events/mousedown.js","events/mousemove.js","events/mouseup.js","events/resize.js","static/restart.js","static/set.js","static/start.js","static/stop.js"],"names":["Object","prototype","merge","object","key","this","V360","[object Object]","$v360","document","querySelectorAll","i","l","length","init","$target","v360","played","restart","props","target","srcs","undefined","sprite","frames","dragSensitivity","canvas","appendCanvas","imgs","currentFrame","allowDrag","mousePressing","mouseStart","loadedImages","JSON","parse","getAttribute","replace","preload","onresize","V360DOM","window","addEventListener","createElement","resizeCanvas","ctx","getContext","appendChild","easingFunctions","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","j","img","push","Image","onload","src","slice","$canvas","width","offsetWidth","height","offsetHeight","resizeImage","$img","setImage","n","clearRect","pos","spriteWidth","drawImage","mousedownHandle","onmousedown","mouseupHandle","onmouseup","mousemoveHandle","onmousemove","resizeHandle","stopAnimation","start","stop","removeEventListener","remove","animate","to","duration","easingFunction","callback","performance","now","progressed","requestAnimationFrame","time","timeFraction","progress","Infinity","Math","abs","direction","nextFrame","console","log","bind","e","pageX","preventDefault","mouseMoved","roundMouseMoved","round","set","$element","setAttribute","stringify"],"mappings":"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","sourcesContent":["Object.prototype.merge = function(object){\r\n    for (const key in object) this[key] = object[key];\r\n}","class V360{\r\n\r\n    constructor(){\r\n\r\n        const $v360 = document.querySelectorAll('[v360], [V360]');\r\n\r\n        for (let i = 0, l = $v360.length; i < l; i++)\r\n            this.init($v360[i]);\r\n\r\n        return 'teste';\r\n\r\n    }\r\n\r\n    init($target){\r\n\r\n        // If you are already a V360\r\n        if($target.v360 && $target.v360.played)\r\n            return $target.v360.restart();\r\n\r\n        const props = {\r\n\r\n            target: $target,\r\n\r\n            srcs: undefined,\r\n            sprite: undefined,\r\n            frames: 0,\r\n            dragSensitivity: 5,\r\n\r\n            canvas: this.appendCanvas($target),\r\n\r\n            imgs: [],\r\n            currentFrame: 0,\r\n\r\n            allowDrag: true,\r\n            mousePressing: undefined,\r\n            mouseStart: 0,\r\n\r\n            loadedImages: 0\r\n\r\n        };\r\n\r\n        // Replace all ' to \"\r\n        props.merge(JSON.parse($target.getAttribute('v360').replace(/\\'/g, '\"')));\r\n\r\n        this.preload(props);\r\n        this.onresize(props);\r\n\r\n        this.V360DOM($target, props);\r\n\r\n    }\r\n\r\n}\r\n\r\nwindow.addEventListener('load', () => window.v360 = new V360());","V360.prototype.appendCanvas = function($target){\r\n\r\n    let canvas = {};\r\n\r\n    canvas.target = document.createElement('canvas');\r\n    this.resizeCanvas($target, canvas.target);\r\n\r\n    canvas.ctx = canvas.target.getContext('2d');\r\n\r\n    $target.appendChild(canvas.target);\r\n\r\n    return canvas;\r\n\r\n}","/*  \r\n    * Github: https://gist.github.com/gre/1650294\r\n    * Easing Functions - inspired from http://gizma.com/easing/\r\n    * only considering the t value for the range [0, 1] => [0, 1]\r\n*/\r\nV360.prototype.easingFunctions = {\r\n    // no easing, no acceleration\r\n    linear: function (t) { return t },\r\n    // accelerating from zero velocity\r\n    easeInQuad: function (t) { return t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuad: function (t) { return t*(2-t) },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\r\n    // accelerating from zero velocity \r\n    easeInCubic: function (t) { return t*t*t },\r\n    // decelerating to zero velocity \r\n    easeOutCubic: function (t) { return (--t)*t*t+1 },\r\n    // acceleration until halfway, then deceleration \r\n    easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\r\n    // accelerating from zero velocity \r\n    easeInQuart: function (t) { return t*t*t*t },\r\n    // decelerating to zero velocity \r\n    easeOutQuart: function (t) { return 1-(--t)*t*t*t },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\r\n    // accelerating from zero velocity\r\n    easeInQuint: function (t) { return t*t*t*t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },\r\n    // acceleration until halfway, then deceleration \r\n    easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\r\n}","V360.prototype.preload = function(props){\r\n\r\n    // Preload all images\r\n    for(let j = 1; j <= props.frames; j++){\r\n\r\n        // Insert and get img from the array\r\n        const img = props.imgs[props.imgs.push(new Image()) - 1];\r\n\r\n        img.onload = this.onload(props);\r\n\r\n        if(props.sprite){\r\n            img.src = props.sprite;\r\n            break;\r\n        }\r\n\r\n        img.src = props.srcs.replace('#{frame}', ('000' + j).slice(-3));\r\n\r\n    }\r\n\r\n}","V360.prototype.resizeCanvas = function($target, $canvas){\r\n\r\n    $canvas.width = $target.offsetWidth;\r\n    $canvas.height = $target.offsetHeight;\r\n\r\n}","V360.prototype.resizeImage = function(props){\r\n\r\n    const $canvas = props.canvas.target;\r\n    const imgs = props.imgs;\r\n    const sprite = !!props.sprite;\r\n    const frames = props.frames;\r\n\r\n    for(let i = 0, l = imgs.length; i < l; i++){\r\n\r\n        const $img = imgs[i];\r\n        \r\n        if($canvas.width <= $canvas.height){\r\n\r\n            if(sprite) $img.width = $img.width / frames;\r\n\r\n            $img.height = ($img.height * $canvas.width) / $img.width;\r\n            $img.width = $canvas.width;\r\n\r\n            if(sprite) $img.width = $img.width * frames;\r\n\r\n        }else{\r\n\r\n            if(sprite) $img.width = $img.width / frames;\r\n\r\n            $img.width = ($img.width * $canvas.height) / $img.height;\r\n            $img.height = $canvas.height;\r\n\r\n            if(sprite) $img.width = $img.width * frames;\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","V360.prototype.setImage = function(props, n){\r\n\r\n    const $canvas = props.canvas.target;\r\n    const ctx = props.canvas.ctx;\r\n    const imgs = props.imgs;\r\n    const frames = props.frames;\r\n    const sprite = !!props.sprite;\r\n\r\n    const $img = imgs[sprite ? 0 : n];\r\n\r\n    ctx.clearRect(0, 0, $canvas.width, $canvas.height);\r\n\r\n    if(sprite){\r\n\r\n        const pos = -(($img.width / frames) * n);\r\n        const spriteWidth = $img.width / frames;\r\n\r\n        ctx.drawImage($img, pos, 0, $img.width, $img.height);\r\n\r\n        ctx.clearRect(spriteWidth, 0, $canvas.width - spriteWidth, $canvas.height);\r\n        \r\n    }else ctx.drawImage($img, 0, 0, $img.width, $img.height);\r\n\r\n}","V360.prototype.V360DOM = function($target, props){\r\n\r\n    const $canvas = props.canvas.target;\r\n    const frames = props.frames - 1;\r\n\r\n    // Handles\r\n    const mousedownHandle = this.onmousedown(props);\r\n    const mouseupHandle = this.onmouseup(props);\r\n    const mousemoveHandle = this.onmousemove(props);\r\n    const resizeHandle = this.onresize(props);    \r\n\r\n    $canvas.addEventListener('mousedown', mousedownHandle);\r\n    window.addEventListener('mouseup', mouseupHandle);\r\n    window.addEventListener('mousemove', mousemoveHandle);\r\n    window.addEventListener('resize', resizeHandle);\r\n\r\n    $target.v360 = { played: true };\r\n\r\n    $target.v360.start = () => {\r\n\r\n        this.init($target);\r\n\r\n        $target.v360.played = true;\r\n\r\n    }\r\n\r\n    $target.v360.stop = () => {\r\n\r\n        // Remove events\r\n        $canvas.removeEventListener('mousedown', mousedownHandle);\r\n        window.removeEventListener('mouseup', mouseupHandle);\r\n        window.removeEventListener('mousemove', mousemoveHandle);\r\n        window.removeEventListener('resize', resizeHandle);\r\n\r\n        // Remove canvas of the DOM\r\n        if($canvas) $canvas.remove();\r\n\r\n        $target.v360.played = false;\r\n\r\n    }\r\n\r\n    $target.v360.restart = () => {\r\n\r\n        $target.v360.stop();\r\n        $target.v360.start();\r\n\r\n    }\r\n\r\n    let stopAnimation;\r\n    $target.v360.animate = (to, duration, easingFunction = 'linear', callback) => {\r\n\r\n        let start = performance.now();\r\n        let progressed = 0;\r\n\r\n        props.allowDrag = false;\r\n\r\n        requestAnimationFrame(function animate(time){\r\n\r\n            let timeFraction = (time - start) / duration;\r\n        \r\n            // Calculate the current animation state\r\n            let progress = this.easingFunctions[easingFunction || 'linear'](timeFraction);\r\n        \r\n            if(to == Infinity || to == -Infinity){\r\n\r\n                if(~~timeFraction > progressed){\r\n                    progressed = ~~timeFraction;\r\n                    props.currentFrame += (to == Infinity) ? 1 : -1;\r\n                }\r\n\r\n            }else if(~~(progress * Math.abs(to)) > progressed){\r\n\r\n                progressed = ~~(progress * Math.abs(to));\r\n\r\n                let direction = to / Math.abs(to);\r\n                let nextFrame = props.currentFrame + ~~(progress * to);\r\n\r\n                props.currentFrame += nextFrame / Math.abs(nextFrame) * direction;\r\n\r\n                console.log(props.currentFrame);\r\n\r\n            }\r\n\r\n            if(props.currentFrame > frames) props.currentFrame = 0;\r\n            else if(props.currentFrame < 0) props.currentFrame = frames;\r\n\r\n            this.setImage(props, props.currentFrame);\r\n\r\n            if(stopAnimation) return props.allowDrag = !(stopAnimation = false);\r\n\r\n            if(to == Infinity) return requestAnimationFrame(animate.bind(this));\r\n\r\n            if(timeFraction < 1) return requestAnimationFrame(animate.bind(this));\r\n            else if(typeof callback == 'function')return callback();\r\n\r\n            // If you get here means the animation has come to an end\r\n            props.allowDrag = true;\r\n\r\n        }.bind(this));\r\n\r\n    }\r\n\r\n    $target.v360.stopAnimation = () => stopAnimation = true;\r\n\r\n}","V360.prototype.onload = function(props){\r\n\r\n    return e => {\r\n\r\n        props.loadedImages++;\r\n\r\n        if(props.loadedImages < props.frames && !props.sprite) return;\r\n\r\n        this.resizeImage(props);\r\n\r\n        this.setImage(props, props.currentFrame);\r\n\r\n        this.onmousedown(props);\r\n        this.onmouseup(props);\r\n        this.onmousemove(props);\r\n\r\n    }\r\n\r\n}","V360.prototype.onmousedown = function(props){\r\n\r\n    return e => {\r\n\r\n        if(!props.allowDrag) return;\r\n\r\n        props.mousePressing = true;\r\n        props.mouseStart = e.pageX;\r\n\r\n    }\r\n\r\n}","V360.prototype.onmousemove = function(props){\r\n\r\n    return e => {\r\n\r\n        e.preventDefault();\r\n\r\n        if(!props.mousePressing) return;\r\n\r\n        let mouseMoved = (props.mouseStart - e.pageX) / props.dragSensitivity;\r\n\r\n        if(mouseMoved > 1) mouseMoved = 1;\r\n        if(mouseMoved < -1) mouseMoved = -1;\r\n\r\n        if(mouseMoved == 1 || mouseMoved == -1){\r\n\r\n            props.mouseStart = e.pageX;\r\n\r\n            let roundMouseMoved = Math.round(mouseMoved);\r\n\r\n            props.currentFrame += roundMouseMoved / Math.abs(roundMouseMoved);\r\n\r\n            if(props.currentFrame > props.frames - 1) props.currentFrame = 0;\r\n            if(props.currentFrame < 0) props.currentFrame = props.frames - 1;\r\n\r\n            this.setImage(props, props.currentFrame);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","V360.prototype.onmouseup = function(props){\r\n\r\n    return () => {\r\n\r\n        props.mousePressing = false;\r\n        props.mouseStart = 0;\r\n\r\n    }\r\n\r\n}","V360.prototype.onresize = function(props){\r\n\r\n    return () => {\r\n\r\n        const $target = props.target;\r\n        const $canvas = props.canvas.target;\r\n\r\n        if($canvas.width != $target.offsetWidth || $canvas.height != $target.height){\r\n\r\n            const currentFrame = props.currentFrame;\r\n\r\n            this.resizeCanvas($target, $canvas);\r\n            this.resizeImage(props);\r\n\r\n            this.setImage(props, currentFrame);\r\n            \r\n        }\r\n\r\n    }\r\n    \r\n}","V360.prototype.restart = function(){\r\n\r\n    const $v360 = document.querySelectorAll('[v360], [V360]');\r\n\r\n    for (let i = 0, l = $v360.length; i < l; i++)\r\n        $v360[i].v360.restart();\r\n\r\n}","V360.prototype.set = function($element, props){\r\n\r\n    $element.setAttribute('v360', JSON.stringify(props).replace(/\\\"/g, \"'\"));\r\n\r\n    this.init($element);\r\n\r\n}","V360.prototype.start = function(){\r\n\r\n    const $v360 = document.querySelectorAll('[v360], [V360]');\r\n\r\n    for (let i = 0, l = $v360.length; i < l; i++)\r\n        $v360[i].v360.start();\r\n\r\n}","V360.prototype.stop = function(){\r\n\r\n    const $v360 = document.querySelectorAll('[v360], [V360]');\r\n\r\n    for (let i = 0, l = $v360.length; i < l; i++)\r\n        $v360[i].v360.stop();\r\n\r\n}"],"file":"v360-min.js"}